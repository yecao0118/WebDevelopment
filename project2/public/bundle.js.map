{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://project2/./src/constants.js","webpack://project2/./src/listeners.js","webpack://project2/./src/render.js","webpack://project2/./src/services.js","webpack://project2/./src/state.js","webpack://project2/webpack/bootstrap","webpack://project2/webpack/runtime/compat get default export","webpack://project2/webpack/runtime/define property getters","webpack://project2/webpack/runtime/hasOwnProperty shorthand","webpack://project2/webpack/runtime/make namespace object","webpack://project2/./src/chat.js"],"sourcesContent":["const SERVER = {\n  AUTH_MISSING: 'auth-missing',\n  AUTH_INSUFFICIENT: 'auth-insufficient',\n  REQUIRED_USERNAME: 'required-username',\n  REQUIRED_MESSAGE: 'required-message',\n  MESSAGE_NOT_FOUND: 'message-not-found',\n};\n\nconst CLIENT = {\n  NETWORK_ERROR: 'networkError',\n  NO_SESSION: 'noSession',\n};\n\nconst MESSAGES = {\n  [CLIENT.NETWORK_ERROR]: 'Trouble connecting to the network. Please try again.',\n  [SERVER.AUTH_INSUFFICIENT]: 'Your username is not permitted. Please try a different username.',\n  [SERVER.REQUIRED_USERNAME]: 'Please enter a valid username (letters and/or numbers only).',\n  [SERVER.REQUIRED_MESSAGE]: 'Message content cannot be empty.',\n  default: 'Something went wrong. Please try again.',\n};\n\nmodule.exports = { SERVER, CLIENT, MESSAGES };","import { fetchLogin, fetchLogout, fetchMessages, fetchAddMessage, fetchSession, fetchUsers, fetchAllUsers, fetchDeleteMessage } from './services';\nimport state, { login, logout, setMessages, setUsers, setAllUsers, setError, startLoginPending, clearError } from './state';\nimport render from './render';\n\nlet pollingInterval;\n\nexport function addAbilityToLogin({ state, appEl }) {\n  appEl.addEventListener('submit', (e) => {\n    if (!e.target.classList.contains('login__form')) return;\n    e.preventDefault();\n\n    const usernameInput = appEl.querySelector('.login__username');\n    if (!usernameInput) {\n      console.error('Login input element not found');\n      setError('Login input not found');\n      render({ state, appEl });\n      return;\n    }\n\n    const username = usernameInput.value.trim();\n    if (!username) {\n      setError('Username is required');\n      render({ state, appEl });\n      return;\n    }\n\n    startLoginPending();\n    render({ state, appEl });\n\n    fetchLogin(username)\n      .then(() => {\n        login(username);\n        clearError();\n        return Promise.all([fetchMessages(), fetchUsers(), fetchAllUsers()]);\n      })\n      .then(([messages, users, allUsers]) => {\n        setMessages(messages);\n        setUsers(users);\n        setAllUsers(allUsers);\n        startPolling({ state, appEl });\n        render({ state, appEl });\n      })\n      .catch(err => {\n        setError(err.error);\n        state.isLoginPending = false;\n        render({ state, appEl });\n      });\n  });\n}\n\nexport function addAbilityToLogout({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if (!e.target.classList.contains('controls__logout')) return;\n\n    fetchLogout()\n      .then(() => {\n        logout();\n        clearError();\n        stopPolling();\n        render({ state, appEl });\n      })\n      .catch(err => {\n        setError(err.error);\n        render({ state, appEl });\n      });\n  });\n}\n\nexport function addAbilityToSendMessage({ state, appEl }) {\n  appEl.addEventListener('input', (e) => {\n    if (e.target.classList.contains('message__input')) {\n      state.messageInputValue = e.target.value || '';\n    }\n  });\n\n  appEl.addEventListener('submit', (e) => {\n    if (!e.target.classList.contains('message__form')) return;\n    e.preventDefault();\n\n    const message = (state.messageInputValue || '').trim();\n    if (!message) {\n      setError('Message cannot be empty');\n      render({ state, appEl });\n      return;\n    }\n\n    fetchAddMessage(message)\n      .then(() => {\n        state.messageInputValue = ''; \n        clearError();\n        render({ state, appEl });\n      })\n      .catch(err => {\n        setError(err.error);\n        render({ state, appEl });\n      });\n  });\n}\n\nexport function addAbilityToDeleteMessage({ state, appEl }) {\n  appEl.addEventListener('click', (e) => {\n    if (e.target.classList.contains('message__delete')) {\n      const messageId = e.target.getAttribute('data-id');\n      fetchDeleteMessage(messageId)\n        .then(response => {\n          if (response.success) {\n            state.messages = state.messages.filter(msg => msg.id !== messageId);\n            render({ state, appEl });\n          }\n        })\n        .catch(err => {\n          setError(err.error);\n          render({ state, appEl });\n        });\n    }\n  });\n}\n\nexport function startPolling({ state, appEl }) {\n  if (pollingInterval) {\n    clearInterval(pollingInterval);\n  }\n  pollingInterval = setInterval(() => {\n    if (!state.isLoggedIn) {\n      stopPolling();\n      return;\n    }\n    Promise.all([fetchMessages(), fetchUsers(), fetchAllUsers()])\n      .then(([newMessages, newUsers, newAllUsers]) => {\n        const isMessagesUpdated = JSON.stringify(newMessages) !== JSON.stringify(state.messages);\n        const isUsersUpdated = JSON.stringify(newUsers) !== JSON.stringify(state.users);\n        const isAllUsersUpdated = JSON.stringify(newAllUsers) !== JSON.stringify(state.allUsers);\n\n        if (isMessagesUpdated) {\n          setMessages(newMessages);\n        }\n        if (isUsersUpdated) {\n          setUsers(newUsers);\n        }\n        if (isAllUsersUpdated) {\n          setAllUsers(newAllUsers);\n        }\n\n        if (isMessagesUpdated || isUsersUpdated || isAllUsersUpdated) {\n          render({ state, appEl });\n        }\n      })\n      .catch(err => {\n        if (err.error === 'auth-missing') {\n          logout();\n          setError('Session expired. Please log in again.');\n          stopPolling();\n          render({ state, appEl });\n          return;\n        }\n        if (!state.error) {\n          setError(err.error);\n          render({ state, appEl });\n        }\n      });\n  }, 5000);\n}\n\nfunction stopPolling() {\n  if (pollingInterval) {\n    clearInterval(pollingInterval);\n    pollingInterval = null;\n  }\n}","function render({ state, appEl }) {\n  const html = `\n    <main>\n      ${generateStatusHtml(state)}\n      ${generateLoginHtml(state)}\n      ${generateChatHtml(state)}\n    </main>\n  `;\n  appEl.innerHTML = html;\n}\n\nfunction generateStatusHtml(state) {\n  return state.error ? `<div class=\"status error\">${state.error}</div>` : '';\n}\n\nfunction generateLoginHtml(state) {\n  if (state.isLoggedIn) {\n    return '';\n  }\n  if (state.isLoginPending) {\n    return `\n      <div class=\"login__waiting\">Loading user...</div>\n    `;\n  }\n  return `\n    <div class=\"login\">\n      <h2 class=\"login__title\">Login</h2>\n      <form class=\"login__form\" action=\"#login\">\n        <label>\n          <span>Username:</span>\n          <input class=\"login__username\" type=\"text\" value=\"${state.loginInputValue || ''}\">\n        </label>\n        <button class=\"login__button\" type=\"submit\">Login</button>\n      </form>\n    </div>\n  `;\n}\n\nfunction generateChatHtml(state) {\n  if (!state.isLoggedIn) return '';\n  \n  const messagesHtml = state.messages.map(msg => {\n    const isUserMessage = msg.username === state.username;\n    return `\n      <div class=\"message\">\n        <span class=\"message__username\">${msg.username}:</span> ${msg.message}\n        ${isUserMessage ? `<button class=\"message__delete\" data-id=\"${msg.id}\">Delete</button>` : ''}\n      </div>\n    `;\n  }).join('');\n\n  return `\n    <div class=\"chat\">\n      ${generateAllUserListHtml(state)}\n      ${generateUserListHtml(state)}\n      <div class=\"messages\">\n        <div class=\"message__title\">This is the group for Info6150. Let's chat!</div>\n        <div class=\"messages__content\">${messagesHtml}</div>\n      </div>\n      ${generateAddMessageHtml(state)}\n      ${generateControlsHtml(state)}\n    </div>\n  `;\n}\n\nfunction generateUserListHtml(state) {\n  if (!state.users || state.users.length === 0) {\n    return '<div class=\"user-list\">No users online</div>';\n  }\n\n  const usersHtml = state.users.map(user => `\n    <span class=\"user__name\">${user}</span>\n  `).join(', ');\n\n  return `\n    <div class=\"user-list\">\n      <span>Hi, ${state.username}</span>\n    </div>\n  `;\n}\n\nfunction generateAllUserListHtml(state) {\n  if (!state.allUsers || state.allUsers.length === 0) {\n    return '<div class=\"all-user-list\">No users have logged in yet</div>';\n  }\n\n  const onlineUsers = new Set(state.users);\n\n  const allUsersHtml = state.allUsers.map(user => {\n    const isOnline = onlineUsers.has(user);\n    return `\n      <div class=\"all-user\">\n        <span class=\"all-user__name\">${user} ${isOnline ? '(online)' : '(offline)'}</span>\n      </div>\n    `;\n  }).join('');\n\n  return `\n    <div class=\"all-user-list\">\n      <h3>All Users</h3>\n      ${allUsersHtml}\n    </div>\n  `;\n}\n\nfunction generateControlsHtml(state) {\n  return `\n    <div class=\"controls\">\n      <button class=\"controls__logout\">Logout</button>\n    </div>\n  `;\n}\n\nfunction generateAddMessageHtml(state) {\n  return `\n    <form class=\"message__form\" action=\"#send\">\n      <label for=\"message__input\">\n        <input id=\"message__input\" class=\"message__input\" type=\"text\" placeholder=\"Type a message...\" value=\"${state.messageInputValue || ''}\">\n      </label>\n      <button type=\"submit\" class=\"message__button\">Send</button>\n    </form>\n  `;\n}\n\nexport default render;","export function fetchLogin(username) {\n  return fetch('/api/session', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ username })\n  }).then(handleResponse);\n}\n\nexport function fetchLogout() {\n  return fetch('/api/session', { method: 'DELETE' }).then(handleResponse);\n}\n\nexport function fetchMessages() {\n  return fetch('/api/messages').then(handleResponse);\n}\n\nexport function fetchAddMessage(message) {\n  return fetch('/api/messages', {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ message })\n  }).then(handleResponse);\n}\n\nexport function fetchSession() {\n  return fetch('/api/session')\n    .then(handleResponse)\n    .catch(err => {\n      if (err.error === 'auth-missing') {\n        return Promise.reject({ error: 'auth-missing' });\n      }\n      return Promise.reject(err);\n    });\n}\n\nexport function fetchUsers() {\n  return fetch('/api/users')\n    .then(handleResponse)\n    .catch(err => {\n      const error = err.error || 'Failed to fetch users';\n      return Promise.reject({ error });\n    });\n}\n\nexport function fetchAllUsers() {\n  return fetch('/api/allusers')\n    .then(handleResponse)\n    .catch(err => {\n      const error = err.error || 'Failed to fetch all users';\n      return Promise.reject({ error });\n    });\n}\n\nexport function fetchDeleteMessage(id) {\n  return fetch(`/api/messages/${id}`, {\n    method: 'DELETE',\n  }).then(handleResponse);\n}\n\nfunction handleResponse(response) {\n  if (response.ok) {\n    return response.json();\n  }\n  return response.json().then(err => {\n    const error = err.error || 'Something went wrong';\n    return Promise.reject({ error });\n  });\n}","import { MESSAGES } from './constants';\n\nconst state = {\n  messages: [],\n  users: [],    \n  allUsers: [], \n  isLoggedIn: false,\n  isLoginPending: false,\n  isChatPending: false,\n  error: '',\n  username: ''\n};\n\nexport function login(username) {\n  state.isLoggedIn = true;\n  state.isLoginPending = false;\n  state.username = username;\n  state.error = '';\n}\n\nexport function logout() {\n  state.isLoggedIn = false;\n  state.isLoginPending = false;\n  state.username = '';\n  state.messages = [];\n  state.users = [];   \n  state.error = '';\n}\n\nexport function setMessages(newMessages) {\n  state.messages = newMessages;\n  state.isChatPending = false;\n  state.error = '';\n}\n\nexport function setUsers(newUsers) {\n  const activeUsers = new Set(newUsers);\n  state.users = state.users.filter(user => activeUsers.has(user));\n  state.users = [...newUsers];\n}\n\nexport function setAllUsers(newAllUsers) {\n  state.allUsers = newAllUsers;\n}\n\nexport function setError(error) {\n  state.error = MESSAGES[error] || MESSAGES.default;\n  state.isChatPending = false;\n  state.isLoginPending = false;\n}\n\nexport function startLoginPending() {\n  state.isLoginPending = true;\n  state.error = '';\n}\n\nexport function startChatPending() {\n  state.isChatPending = true;\n  state.error = '';\n}\n\nexport function clearError() {\n  state.error = '';\n}\n\nexport function setSession(username) {\n  state.isLoggedIn = true;\n  state.username = username;\n  state.isLoginPending = false;\n  state.error = '';\n}\n\nexport default state;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import state, { login, logout, setMessages, setUsers, setAllUsers, setError } from './state';\nimport { fetchLogin, fetchLogout, fetchMessages, fetchAddMessage, fetchSession, fetchUsers, fetchAllUsers } from './services';\nimport render from './render';\nimport { addAbilityToLogin, addAbilityToLogout, addAbilityToSendMessage, startPolling, addAbilityToDeleteMessage } from './listeners';\n\nconst appEl = document.querySelector('#app');\nrender({ state, appEl });\n\naddAbilityToLogin({ state, appEl });\naddAbilityToLogout({ state, appEl });\naddAbilityToSendMessage({ state, appEl });\nstartPolling({ state, appEl });\naddAbilityToDeleteMessage({ state, appEl }); \ncheckForSession();\n\nfunction checkForSession() {\n  fetchSession()\n    .then(session => {\n      login(session.username);\n      render({ state, appEl });\n      return Promise.all([fetchMessages(), fetchUsers(), fetchAllUsers()]);\n    })\n    .catch(err => {\n      if (err?.error === 'auth-missing') {\n        return Promise.reject({ error: 'noSession' });\n      }\n      return Promise.reject(err);\n    })\n    .then(([messages, users, allUsers]) => {\n      setMessages(messages);\n      setUsers(users);\n      setAllUsers(allUsers);\n      render({ state, appEl });\n    })\n    .catch(err => {\n      if (err?.error === 'noSession') {\n        logout();\n        render({ state, appEl });\n        return;\n      }\n\n      setError(err?.error || 'ERROR');\n      render({ state, appEl });\n    });\n}"],"names":["SERVER","AUTH_MISSING","AUTH_INSUFFICIENT","REQUIRED_USERNAME","REQUIRED_MESSAGE","MESSAGE_NOT_FOUND","CLIENT","NETWORK_ERROR","NO_SESSION","MESSAGES","_defineProperty","module","exports","fetchLogin","fetchLogout","fetchMessages","fetchAddMessage","fetchSession","fetchUsers","fetchAllUsers","fetchDeleteMessage","state","login","logout","setMessages","setUsers","setAllUsers","setError","startLoginPending","clearError","render","pollingInterval","addAbilityToLogin","_ref","appEl","addEventListener","e","target","classList","contains","preventDefault","usernameInput","querySelector","console","error","username","value","trim","then","Promise","all","_ref2","_ref3","_slicedToArray","messages","users","allUsers","startPolling","err","isLoginPending","addAbilityToLogout","_ref4","stopPolling","addAbilityToSendMessage","_ref5","messageInputValue","message","addAbilityToDeleteMessage","_ref6","messageId","getAttribute","response","success","filter","msg","id","_ref7","clearInterval","setInterval","isLoggedIn","_ref8","_ref9","newMessages","newUsers","newAllUsers","isMessagesUpdated","JSON","stringify","isUsersUpdated","isAllUsersUpdated","html","concat","generateStatusHtml","generateLoginHtml","generateChatHtml","innerHTML","loginInputValue","messagesHtml","map","isUserMessage","join","generateAllUserListHtml","generateUserListHtml","generateAddMessageHtml","generateControlsHtml","length","usersHtml","user","onlineUsers","Set","allUsersHtml","isOnline","has","fetch","method","headers","body","handleResponse","reject","ok","json","isChatPending","activeUsers","_toConsumableArray","startChatPending","setSession","document","checkForSession","session"],"sourceRoot":""}